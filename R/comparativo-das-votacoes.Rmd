---
title: "comparativo-das-votacoes"
author: "Rodolfo Viana"
date: "29-10-2015"
output: html_document
---

Verifica quais são os meses/semanas/dias que mais tem votações na camâra.

Bibliotecas necessárias 

```{r}
library(ggplot2)
library(dplyr)
require(scales)

source("R/camara-lib.R")
```

Carregando CSV com os votos dos deputados

```{r}
votos <- ler_votos_de_ativos("votacoes.csv")
proposicoes <- as.data.frame(unique(votos[,c("tipo", "num_pro")]))

# distinguir diferentes votações de uma mesma proposição
votos$num_pro <- paste0(votos$num_pro, "-", votos$id_votacao)
```

Tipo de votações 

```{r}
proposicoes$tipo <- as.character(proposicoes$tipo)
plot <- as.data.frame(table(proposicoes$tipo))

p <- ggplot(data = plot, aes(x=reorder(Var1, -Freq), y = Freq)) + 
  geom_bar(stat="identity") + 
  labs(y='Número de Proposições', x='Tipo') + 
  theme_classic() + 
  theme(axis.ticks = element_blank())

png("plot/numero_de_proposicoes_1.png", 
    width = 800, height = 600)
p
dev.off()
```


Quantidade de votação mês a mês

```{r}
votacoes <- unique(votos[,c("data", "num_pro")])
votacoes$ano <- as.numeric(format(as.Date(votacoes$data, format = "%d/%m/%Y"),'%Y'))
votacoes$mes <- as.numeric(format(as.Date(votacoes$data, format = "%d/%m/%Y"),'%m'))

votacoes <- votacoes %>%
  filter(ano >= 2015)

plot <- quantidade_votacao_mes(votacoes)
plot$nome_mes <- month.abb[plot$Mes]

p <- ggplot(data = plot, aes(x=reorder(nome_mes, Mes), y = N_votacoes)) + 
  geom_bar(stat="identity") + 
  labs(y='Número de Votações', x='Mês') + 
  theme_classic() + 
  theme(axis.ticks = element_blank())

png("plot/numero_votacao_mes_1.png", 
    width = 800, height = 600)
p
dev.off()
```